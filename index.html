<!DOCTYPE html>
<html lang="pt">
  <head>
    <meta charset="UTF-8" />
    <title>AR Viewer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <script type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
    </script>
  </head>

  <body style="margin:0; background:#02012b; color:white; font-family:sans-serif;">

    <div style="position:fixed; top:10px; left:10px; z-index:10;">
      <h1 style="margin:0; font-size:18px;">
        âœ¨ If you can see this text and the animated model below, the magic is working!
      </h1>
      <p style="margin:4px 0 0;">
        ðŸ“± On your mobile, tap the AR cube icon or use the button below to explore more.
      </p>
    </div>

    <model-viewer
      id="mv"
      src="Siemens%20CH.glb"
      ios-src="Siemens%20CH.usdz"

      ar
      ar-modes="webxr scene-viewer quick-look"

      ar-placement="floor"
      placement="tap"

      camera-controls
      auto-rotate

      scale="0.1 0.1 0.1"
      ar-scale="auto"
      bounds="tight"

      style="width:100vw; height:100vh;">
    </model-viewer>

    <!-- BotÃ£o AR -->
    <button id="btnAR"
      style="
        position:fixed;
        bottom:16px;
        left:50%;
        transform:translateX(-50%);
        padding:12px 18px;
        border-radius:999px;
        border:none;
        background:#00ffb9;
        color:black;
        font-weight:600;
        font-family:inherit;
        box-shadow:0 4px 12px rgba(0,0,0,0.3);
        z-index:20;
      ">
      AR
    </button>

    <!-- BotÃ£o Voltar (apenas em AR) -->
    <button id="btnBack"
      style="
        position:fixed;
        top:16px;
        right:16px;
        padding:10px 14px;
        border-radius:8px;
        border:none;
        background:#ff4d4d;
        color:white;
        font-weight:600;
        font-family:inherit;
        box-shadow:0 4px 12px rgba(0,0,0,0.3);
        z-index:30;
        display:none;
      ">
      â¬… Voltar
    </button>

    <script>
      const mv = document.getElementById('mv');
      const btnAR = document.getElementById('btnAR');
      const btnBack = document.getElementById('btnBack');

      // Entrar em AR
      btnAR.addEventListener('click', () => {
        if (mv && mv.activateAR) {
          mv.activateAR();
        }
      });

      // Detetar entrada / saÃ­da de AR
      mv.addEventListener('ar-status', (event) => {
        const status = event.detail.status;

        if (status === 'session-started') {
          btnBack.style.display = 'block';
          btnAR.style.display = 'none';
        }

        if (status === 'not-presenting') {
          btnBack.style.display = 'none';
          btnAR.style.display = 'block';
        }
      });

      // Sair do AR
      btnBack.addEventListener('click', () => {
        if (document.fullscreenElement) {
          document.exitFullscreen();
        }
      });
    </script>

  </body>
</html>
